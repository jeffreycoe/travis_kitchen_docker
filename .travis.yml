matrix:
  include:
    - os: linux
      dist: xenial
      language: ruby
      cache: bundler
      rvm:
        - 2.4.5
        - 2.5.4
        - 2.6.2
      script:
        - bundle exec docker version
        - bundle exec kitchen --version
        - bundle exec rake spec
        - bundle exec kitchen test -d always
    - os: windows
      language: bash
      install:
        - choco install mingw
        - choco install msys2
        - /c/tools/ruby25/bin/ridk exec pacman -Sy --needed base-devel mingw-w64-x86_64-toolchain
      script:
        - export KITCHEN_YAML=.kitchen.windows.yml
        - ruby -v
        - gem install bundler
        - bundle install
        - bundle exec docker version
        - bundle exec kitchen --version
        - bundle exec rake spec
        - bundle exec kitchen test -d always

services:
- docker
